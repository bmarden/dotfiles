#
# .zshrc
#

[[ ! -f $XDG_CONFIG_HOME/p10k/p10k.zsh ]] || source $XDG_CONFIG_HOME/p10k/p10k.zsh

# Set history here since MacOS sets them in /etc/zshrc
HISTSIZE=10000
SAVEHIST=10000
HISTFILE="$XDG_STATE_HOME/zsh/history"

### Setup zinit
source "$(brew --prefix zinit)/zinit.zsh"
autoload -Uz _zinit
(( ${+_comps} )) && _comps[zinit]=_zinit

# Load a few important annexes, without Turbo
# (this is currently required for annexes)
zinit light-mode for \
    zdharma-continuum/zinit-annex-as-monitor \
    zdharma-continuum/zinit-annex-bin-gem-node \
    zdharma-continuum/zinit-annex-patch-dl \
    zdharma-continuum/zinit-annex-rust

### End of Zinit's installer chunk

setopt interactive_comments
setopt hist_ignore_dups
setopt octal_zeroes
setopt no_prompt_cr
setopt notify
setopt no_hist_no_functions
setopt no_always_to_end
setopt append_history
setopt list_packed
setopt inc_append_history
setopt complete_in_word
setopt no_auto_menu
setopt auto_pushd
setopt pushd_ignore_dups
setopt no_glob_complete
setopt no_glob_dots
setopt c_bases
setopt numeric_glob_sort
setopt share_history promptsubst
setopt auto_cd
setopt extended_history
setopt rc_quotes
autoload -Uz allopt zed zmv zcalc colors

zstyle ':completion:*' cache-path "$XDG_CACHE_HOME"/zsh/zcompcache
zstyle ':completion:*:*:kill:*' menu yes select
zstyle ':completion:*:kill:*'   force-list always
zstyle ":completion:*:descriptions" format "%B%d%b"
zstyle ':completion:*:*:*:default' menu yes select search
zstyle ':completion:*:*:*:default' menu yes select
zstyle ':completion:*' matcher-list 'm:{a-z}={A-Za-z}'

[ -n "$(command -v asdf)" ] && source "$(brew --prefix asdf)/libexec/asdf.sh"

# load zinit plugins
source "${XDG_CONFIG_HOME}/zinit/plugins.zsh" 

# Setup config from .zshrc.d
setopt EXTENDED_GLOB
for _zconf in $HOME/.zshrc.d/*.zsh(N); do
 # ignore files that begin with a tilde
 case ${f:t} in '~'*) continue;; esac
 source "$_zconf"
done
unset _zconf

